javascript:/* v1.0.0 */(()=>{console.log("en_kugi_reader_bookmarklet.js");const e=()=>{document.querySelector("#ek_kugi_style")?.remove(),document.head.insertAdjacentHTML("beforeend",'\n<style id="ek_kugi_style">\n.ek_kakko, .ek_kuten,.ek_touten, .ek_quote, .ek_dash {\n\tdisplay: inline!important;\n\tfloat: unset!important;\n\tposition: static!important;\n}\n.ek_kakko {\n\tcolor: #b4b4b4;\n}\n.ek_kuten {\n\tcolor: #ddd;\n\tbackground-color: #464646;\n\tborder: 1px #ddd dashed;\n\tfont-weight: bold;\n\tborder-radius: 4px;\n\tmargin-inline-start: 4px;\n\tmargin-inline-end: 12px;\n\tpadding: 1px;\n}\n.ek_touten {\n\tcolor: #ddd;\n\tbackground-color: #5e5e5e;\n\tfont-weight: bold;\n\tmargin-inline-start: 2px;\n\tmargin-inline-end: 4px;\n\tpadding-block-end: 3px;\n}\n.ek_quote {\n\tbackground-color: #c8ff70;\n\tmargin-inline-start: 2px;\n\tmargin-inline-end: 2px;\n}\n.ek_dash {\n\tbackground-color: #ffeff2;\n}\n</style>')},n=e=>{const n=e.textContent,t=/\(.*?\)|\(.*|[^(]*?\)|[.?!]+|[,:;]+|"|“|”|—|–|…/gsu;let o,a=0,s="";for(;o=t.exec(n);){const e=n.slice(a,o.index),c=o[0];if(")"===c.at(-1))s+=`${e}<span class="ek_kakko">${c}</span>`;else switch(c[0]){case"(":s+=`${e}<span class="ek_kakko">${c}</span>`;break;case".":case"?":case"!":s+=`${e}<span class="ek_kuten">${c}</span>`;break;case",":case":":case";":s+=`${e}<span class="ek_touten">${c}</span>`;break;case'"':case"“":case"”":s+=`${e}<span class="ek_quote">${c}</span>`;break;case"—":case"–":case"…":s+=`${e}<span class="ek_dash">${c}</span>`;break;default:console.log(`%c switch文において予期されない値です。「${c}」`,"color:hotpink;")}a=t.lastIndex}""!==s&&(s+=n.slice(a),((e,n)=>{const t=document.createElement("div");t.innerHTML=n,e.after(...t.childNodes),e.remove()})(e,s))};document.querySelector("#ek_kugi_style")?(()=>{const n=document.querySelector("#ek_kugi_style");n.firstChild?n.replaceChildren():e()})():(e(),(()=>{const e=document.createNodeIterator(document.body,NodeFilter.SHOW_TEXT,(e=>e.parentElement.closest("SCRIPT,STYLE,NAV,NOSCRIPT,FOOTER,ASIDE,LINK,CANVAS,IMG,HR,EMBED,OBJECT,CODE,TEXTAREA,IFRAME")||e.textContent.match(/^\s*$/u)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT)),t=[];let o;for(;o=e.nextNode();)t.push(o);for(let e=0;e<t.length;e++){const o=t[e];n(o)}})())})();